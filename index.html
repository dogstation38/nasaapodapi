<body>
     <main>
     <header>
     <h1>Nasa's Astronomical Picture of the Day</h1>
<link href="/style.css" rel="stylesheet">
     <form >
     <label for="datepiceker">Pick a date:
     <input id="datepicker" type="date" min="" max="" > 
     </label>
     </form>

     <hr style="color: white; width: 60vw;">
     </header>

     <section class="title-section">
     <h2 id="title"></h2>
     <p id="date"></p>
     <small style="display: block;" id="copyright" ></small>
     </section>

     <section id="media-section">
     </section>

    <div class="description-div">
     <p id="description"></p>
    </div>





  <script type="text/javascript">
			function nasarequested(){
const baseUrl = 'https://api.nasa.gov/planetary/apod?api_key=';
const apiKey = "QBgA3XdP68DWXdL3myy4K82fe2KnS5o0D1aogPhI";
const dateInput = document.querySelector("#datepicker");
const title = document.querySelector("#title");
const copyright = document.querySelector("#copyright");
const mediaSection = document.querySelector("#media-section");
const information = document.querySelector("#description");

const currentDate =new Date().toISOString().slice(0, 10);


const imageSection =`<a id="hdimg" href="" target="-blank">
    <div class="image-div">
    <img id="image_of_the_day" src="" alt="image-by-nasa">
    </div>
    
</a>`

const videoSection=`<div class="video-div"> <iframe id="videoLink" src="" frameborder="0"></iframe></div>`

let newDate = "&date="+dateInput.value+"&";


function fetchData(){
        try{
            fetch(baseUrl+apiKey+newDate)
            .then(response=> response.json())
            .then(json=>{
                console.log(json);
                diplaydata(json)
            })
            }catch(error){
                console.log(error)
            }
    }
    
function diplaydata(data){
    
    title.innerHTML=data.title;
    
    if(data.hasOwnProperty("copyright")){
        copyright.innerHTML=data.copyright;
    } else{
        copyright.innerHTML=""
    }   
    
    date.innerHTML=data.date;
    dateInput.max=currentDate;
    dateInput.min="1995-06-16";
    
        if(data.media_type=="video"){
            mediaSection.innerHTML=videoSection;
            document.getElementById("videoLink").src=data.url;
           
        }else{
            mediaSection.innerHTML=imageSection;
            document.getElementById("hdimg").href=data.hdurl;
            document.getElementById("image_of_the_day").src=data.url;
        }
    information.innerHTML=data.explanation
}
fetchData();
}

const dateInput = document.querySelector("#datepicker");
dateInput.addEventListener('change',(e)=>{
    e.preventDefault();
    nasarequested();
})

nasarequested().onload;


		</script>
	</body>
</html>
